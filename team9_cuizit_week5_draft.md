# Week 5 实验报告：FR_mid 硬件基础与 Apollo 3.0 架构分析
## 1. 实验任务
**任务 1：FR_mid 车辆核心硬件与紧急制动**
* 明确车辆紧急按钮位置：掌握紧急制动与解除紧急制动的操作。
* 了解核心传感器工作原理（LiDAR、GNSS/IMU、感知摄像头等）。
* 明确车辆防撞条位置。
**任务 2：Apollo 3.0 软件架构及其模块功能**
* 理解 Apollo 3.0 软件架构及其核心模块。
* 熟悉源码目录结构，定位架构模块对应的代码路径。
## 2. 实现过程
### > FR_mid 车辆硬件实操
通过实地观察 FR_mid 车辆，明确了物理安全防护与传感器布局：
* 
**紧急制动系统：** 紧急制动按钮位于 **FR_mid 车辆后方** 。按下按钮即可触发紧急制动，向右旋转按钮即可解除制动状态 。
* 
**传感器分布：** 车辆搭载了包括激光雷达、组合导航、摄像头在内的多种传感器，实现了从三维建模到语义感知的全方位覆盖 。
### > 传感器原理调研
1. 
**LiDAR (激光雷达)：** 通过发射激光脉冲并测量反射回来的飞行时间（ToF）来构建环境的 3D 点云地图，是高精度空间建模的核心 。
2.  **GNSS/IMU (组合导航)：** GNSS 提供绝对位置，IMU 提供姿态信息，两者结合确保在隧道等信号弱的环境下依然拥有高精度定位能力 。
2. 
**感知摄像头：** 利用图像传感器捕捉信息，通过计算机视觉算法识别车道线、交通标志等，是语义感知的来源 。
3. 
**超声波雷达：** 利用回波原理探测近距离障碍物，主要用于泊车辅助和低速碰撞预警 。
4. 
**毫米波雷达：** 利用多普勒效应测量物体的相对速度和距离，抗干扰能力强，常用于 ACC 和 AEB 。
### > Apollo 3.0 软件架构与源码映射
通过调研，整理了 Apollo 3.0 核心模块的功能及代码路径：
| 模块名称 | 核心功能说明 | 代码路径 |
| --- | --- | --- |
| **Perception (感知)** | 利用多传感器数据识别并跟踪障碍物及交通标志 。
 | <br>`modules/perception` 

 |
| **Prediction (预测)** | 根据历史轨迹和地图信息预测障碍物未来路径 。

 | <br>`modules/prediction` 

 |
| **Routing (路由规划)** | 在车道级地图上搜索全局最佳行驶路径 。

 | <br>`modules/routing` 

 |
| **Planning (决策规划)** | 计算局部时空轨迹，涵盖行为决策和速度优化 。

 | <br>`modules/planning` 

 |
| **Control (控制)** | 通过 PID、MPC 等算法计算控制指令以跟踪轨迹 。

 | <br>`modules/control` 

 |
| **Localization (定位)** | 融合多源数据提供高精度位置和姿态 。

 | <br>`modules/localization` 

 |
| **Canbus (总线)** | 软件系统与车辆底盘之间的桥梁，转化控制信号 。

 | <br>`modules/canbus` 

 |
| **Map (高精地图)** | 提供车道线、限速等结构化数据解析接口 。

 | <br>`modules/map` 

 |
| **Guardian (安全守护)** | 安全防线的最后一步，强制执行紧急停车 。
---
## 3. 遇到的问题及解决

* **问题 1：关于紧急制动解除方向的混淆。**
**解决：** 实际操作中容易习惯性向上拔，查阅手册明确了需要“向右旋转”方可解除 。
* **问题 2：GNSS 在高楼密集的实验区信号不稳定。**
**解决：** 学习了 IMU 的推算维持作用，理解了为什么组合导航在信号丢失时依然能维持短时间定位 。
* **问题 3：对 Apollo 源码中 `guardian` 与 `monitor` 的区别理解模糊。**
**解决：** 通过对比发现，Monitor 负责状态实时检测，而 Guardian 是执行安全防线的最后一步，负责强制急停 。
---
## 4. 总结与心得

本周的学习重点在于将 ROS 的软件逻辑与 FR_mid 的硬件实体相结合。通过对各类传感器的调研，我深刻体会到自动驾驶系统并不是单一算法的堆砌，而是多传感器融合的复杂成果。例如，LiDAR 虽然建图精准，但摄像头提供的语义信息（如红绿灯颜色）是其无法替代的 。

同时，Apollo 3.0 的架构设计展示了极高的模块化程度。这种结构清晰的源码布局，不仅方便了算法的快速迭代，也为系统安全提供了多重保障。虽然目前更多是在理解现有架构，但这种大局观的建立对后续开发至关重要。